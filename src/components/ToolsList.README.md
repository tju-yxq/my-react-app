# ToolsList 组件说明

## 功能概述

`ToolsList` 是一个带有分页和下拉刷新功能的工具列表组件，用于在首页侧边栏中显示可用的工具和服务。

## 主要功能

### 1. 分页功能
- **每页显示**：默认每页显示5个工具（可配置）
- **加载更多**：点击"加载更多"按钮获取下一页数据
- **分页信息**：显示当前页码、总页数和总工具数量
- **自动追加**：新页面的数据会自动追加到现有列表中

### 2. 下拉刷新功能
- **手动刷新**：点击刷新按钮重新获取最新数据
- **刷新动画**：刷新时按钮会显示旋转动画和脉冲效果
- **数据重置**：刷新会清空现有数据并重新加载第一页

### 3. 错误处理
- **网络错误**：API请求失败时显示错误信息
- **重试机制**：提供重试按钮快速重新请求
- **备用数据**：首次加载失败时使用硬编码的备用工具

### 4. 加载状态
- **加载指示器**：数据获取时显示加载动画
- **状态区分**：区分初始加载、刷新和加载更多的不同状态

## 使用方法

```jsx
import ToolsList from '../components/ToolsList';

// 在父组件中使用
<ToolsList onToolSelect={handleToolSelect} />
```

### Props

| 参数         | 类型     | 必填 | 说明                            |
| ------------ | -------- | ---- | ------------------------------- |
| onToolSelect | Function | 是   | 工具选择回调函数，参数为tool_id |

### 回调函数示例

```jsx
const handleToolSelect = (toolId) => {
  console.log('选择的工具ID:', toolId);
  // 处理工具选择逻辑
};
```

## 数据格式

### API响应格式
```json
{
  "items": [
    {
      "tool_id": "tool1",
      "name": "工具名称",
      "description": "工具描述",
      "type": "http", // 或 "mcp"
      "tags": ["tag1", "tag2"]
    }
  ],
  "current_page": 1,
  "total_pages": 3,
  "total_items": 15,
  "page_size": 5,
  "has_next": true,
  "has_prev": false
}
```

### 工具类型显示
- `http` → 显示为"HTTP接口"
- `mcp` → 显示为"MCP工具"

## 样式定制

组件使用CSS变量支持主题定制：

```css
:root {
  --primary-color: #007bff;
  --background-color: #ffffff;
  --text-primary: #333333;
  --border-color: #e0e0e0;
  /* 更多变量... */
}
```

## 响应式设计

- **移动端优化**：在小屏幕设备上自动调整布局
- **触摸友好**：按钮和点击区域适合触摸操作
- **暗色主题**：支持暗色主题模式

## 性能优化

1. **useCallback钩子**：避免不必要的重新渲染
2. **条件渲染**：根据状态智能显示组件
3. **动画优化**：使用framer-motion提供流畅动画
4. **防抖处理**：避免频繁的API请求

## 错误处理策略

1. **网络错误**：显示错误信息并提供重试选项
2. **数据为空**：显示友好的空状态提示
3. **API变更**：兼容不同的API响应格式
4. **备用方案**：提供硬编码的基础工具作为备用

## 测试覆盖

- 组件渲染测试
- 分页功能测试
- 刷新功能测试
- 错误处理测试
- 用户交互测试

## 依赖项

- React (Hooks)
- framer-motion (动画)
- API客户端 (apiClient)

## 更新日志

### v1.0.0
- 初始版本
- 支持分页和下拉刷新
- 错误处理和加载状态
- 响应式设计和主题支持 